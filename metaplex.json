import { Connection, PublicKey, Keypair } from '@solana/web3.js';
import { Metadata, Data } from '@metaplex-foundation/mpl-token-metadata';
import { TOKEN_PROGRAM_ID, Token } from '@solana/spl-token';

async function setTokenMetadata(mintAddress, payer) {
    const connection = new Connection("https://api.devnet.solana.com", "confirmed");

    // Dane metadanych
    const metadataData = new Data({
        // Nazwa Tokena
        name: "TogeHim",
        // Symbol Tokena
        symbol: "TOGH",
        // Opis Tokena
        uri: "https://example.com/my-nft.json", // URL do JSONa z dodatkowymi metadanymi, w tym obrazem
        // Sprzedawca procentowy
        sellerFeeBasisPoints: 500, // 5.00%
        // Twórcy (opcjonalnie)
        creators: null,
    });

    // Utwórz obiekt metadanych
    const metadata = await Metadata.create(
        connection,
        payer,
        new PublicKey(mintAddress),
        payer,
        payer,
        metadataData,
        TOKEN_PROGRAM_ID
    );

    console.log("Metadata Address:", metadata.toBase58());
}

// Użyj tej funkcji w twoim głównym skrypcie lub zintegruj z istniejącym procesem tworzenia tokenu